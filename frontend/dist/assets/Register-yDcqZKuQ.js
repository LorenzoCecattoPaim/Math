import{r as i,u as P,a as k,b as q,j as e,L as v,d as A}from"./index-BHZVmxCX.js";import{G as F}from"./GoogleLoginButton-CxcvqCaP.js";import{B as R}from"./button-YsjuXer5.js";import{L as d,I as m}from"./label-DvjiGtI9.js";import{A as z}from"./arrow-left-B_lEUGrZ.js";import{G as B}from"./graduation-cap-Dy4HGtCQ.js";import"./index-BOSJV_w5.js";function J(){const[x,j]=i.useState(""),[h,N]=i.useState(""),[t,w]=i.useState(""),[n,b]=i.useState(""),[u,l]=i.useState(!1),o=6,p=t.length>0&&t.length<o,f=n.length>0&&t!==n,{signUp:y,startGoogleAuth:C}=P(),g=k(),{toast:a}=q(),S=i.useCallback(s=>{a({variant:"destructive",title:"Erro no login Google",description:s})},[a]),L=async s=>{const{data:r,error:c}=await C(s);if(c||!r){a({variant:"destructive",title:"Erro ao iniciar verificacao",description:(c==null?void 0:c.message)||"Nao foi possivel continuar com Google."});return}a({title:"Codigo enviado",description:`Verifique o email ${r.email} para concluir o acesso.`});const G=new URLSearchParams({pending_token:r.pendingToken,email:r.email});g(`/verify-email?${G.toString()}`)},E=async s=>{if(s.preventDefault(),l(!0),t.length<o){a({variant:"destructive",title:"Senha muito curta",description:`A senha deve ter pelo menos ${o} caracteres.`}),l(!1);return}if(t!==n){a({variant:"destructive",title:"Senhas diferentes",description:"Senha e confirmacao precisam ser identicas."}),l(!1);return}const{error:r}=await y(h,t,n,x);r?a({variant:"destructive",title:"Erro ao criar conta",description:r.message||"Nao foi possivel criar sua conta."}):(a({title:"Conta criada com sucesso",description:"Voce ja pode acessar sua conta."}),g("/dashboard")),l(!1)};return e.jsxs("div",{className:"min-h-screen flex",children:[e.jsx("div",{className:"flex-1 flex flex-col justify-center px-8 md:px-16 lg:px-24",children:e.jsxs("div",{className:"max-w-md w-full mx-auto",children:[e.jsxs(v,{to:"/",className:"inline-flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground mb-8 transition-colors",children:[e.jsx(z,{className:"w-4 h-4"}),"Voltar ao inicio"]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Crie sua conta"}),e.jsx("p",{className:"text-muted-foreground",children:"Comece sua jornada de aprendizado hoje mesmo."})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsx(F,{onSuccess:L,onError:S,disabled:u}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"ou"})})]})]}),e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"fullName",children:"Nome completo"}),e.jsx(m,{id:"fullName",type:"text",autoComplete:"name",placeholder:"Seu nome",value:x,onChange:s=>j(s.target.value),required:!0,className:"h-12"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"email",children:"Email"}),e.jsx(m,{id:"email",type:"email",autoComplete:"email",placeholder:"seu@email.com",value:h,onChange:s=>N(s.target.value),required:!0,className:"h-12"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"password",children:"Senha"}),e.jsx(m,{id:"password",type:"password",autoComplete:"new-password",placeholder:"........",value:t,onChange:s=>w(s.target.value),required:!0,minLength:o,className:"h-12"}),e.jsxs("p",{className:p?"text-xs text-destructive":"text-xs text-muted-foreground",children:["Minimo de ",o," caracteres"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"confirmPassword",children:"Confirmar senha"}),e.jsx(m,{id:"confirmPassword",type:"password",autoComplete:"new-password",placeholder:"........",value:n,onChange:s=>b(s.target.value),required:!0,minLength:o,className:"h-12"}),f?e.jsx("p",{className:"text-xs text-destructive",children:"As senhas nao coincidem."}):e.jsx("p",{className:"text-xs text-muted-foreground",children:"Repita a mesma senha."})]}),e.jsx(R,{type:"submit",variant:"hero",className:"w-full",size:"lg",disabled:u||p||f,children:u?e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"w-4 h-4 animate-spin"}),"Criando conta..."]}):"Criar conta"})]}),e.jsxs("p",{className:"mt-8 text-center text-muted-foreground",children:["Ja tem uma conta?"," ",e.jsx(v,{to:"/login",className:"text-primary font-medium hover:underline",children:"Entrar"})]})]})}),e.jsx("div",{className:"hidden lg:flex flex-1 bg-gradient-to-br from-primary via-primary-glow to-secondary relative overflow-hidden",children:e.jsxs("div",{className:"flex flex-col items-center justify-center w-full p-12 text-white",children:[e.jsx("div",{className:"w-20 h-20 rounded-2xl bg-white/10 backdrop-blur flex items-center justify-center mb-8",children:e.jsx(B,{className:"w-10 h-10"})}),e.jsx("h2",{className:"text-4xl font-bold mb-4 text-center",children:"ProvaLab"}),e.jsx("p",{className:"text-xl text-white/80 text-center max-w-md",children:"Pratique, aprenda e evolua com exercicios personalizados."})]})})]})}export{J as default};
